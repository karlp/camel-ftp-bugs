Log snippet from running this app.

Logging is heavily tuned to only show what we want to see.

A file should be written every 20 seconds, but as we can see, only the 1st and 3rd files get uploaded.
Every other 20seconds, the connection has been timed out (see resources/user.properties for the idle timeout of 5 seoncds)
and the ftp producer fails to write.


"C:\Program Files\Java\jdk1.6.0_12\bin\java" -Didea.launcher.port=7541 "-Didea.launcher.bin.path=C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\bin" -Dfile.encoding=windows-1252 -classpath "C:\Program Files\Java\jdk1.6.0_12\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\resources.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.6.0_12\jre\lib\ext\sunpkcs11.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\alloy.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\annotations.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\asm-commons.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\asm-tree-3.0.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\asm.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\boot.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\bootstrap.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\cglib-nodep-2.1_3.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\commons-codec-1.3.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\commons-collections.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\commons-lang-2.4.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\commons-net-1.4.1.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\extensions.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\forms_rt.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\foundrylogic-vpp-2.2.1.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\freemarker.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\groovy-all-1.6.3.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\icons.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\idea-jsp-openapi.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\idea_rt.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jasper21_rt.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jasper2_rt.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\javac2.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jaxen-1.1.1.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jdom.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jgoodies-forms.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jh.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jna-utils.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jna.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jsf-api.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jsp-api.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\jsr173_1.0_api.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\junit-4.6.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\junit.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\log4j.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\looks-2.2.2.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\microba.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\nanoxml-2.2.3.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\openapi.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\org.eclipse.jdt.core_3.4.4.v_894_R34x.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\oromatcher.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\picocontainer.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\resolver.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\resources.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\resources_en.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\serviceMessages.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\servlet-api.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\trove4j.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\trove4j_src.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\util.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\velocity.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\xbean.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\xerces.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\xml-apis.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\xmlrpc-2.0.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\xpp3-1.1.4-min.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\xstream.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\lib\yjp-controller-api-redist.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\JavaEE\lib\javaee-openapi.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\JavaEE\lib\resources_en.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\JSF\lib\jsf-support.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\JSF\lib\resources_en.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\PersistenceSupport\lib\persistence-openapi.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\PersistenceSupport\lib\resources_en.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\DatabaseSupport\lib\database-openapi.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\DatabaseSupport\lib\jdbc-console.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\DatabaseSupport\lib\resources_en.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\css\lib\css-openapi.jar;C:\Program Files\JetBrains\IntelliJ IDEA 9.0 Beta\plugins\css\lib\resources_en.jar;C:\srcx\camel-ftp-bug\ftpserver\target\classes;C:\Documents and Settings\karlp\.m2\repository\org\springframework\spring\2.5.6\spring-2.5.6.jar;C:\Documents and Settings\karlp\.m2\repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\camel\camel-core\2.0.0\camel-core-2.0.0.jar;C:\Documents and Settings\karlp\.m2\repository\commons-logging\commons-logging-api\1.1\commons-logging-api-1.1.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\camel\camel-spring\2.0.0\camel-spring-2.0.0.jar;C:\Documents and Settings\karlp\.m2\repository\org\springframework\spring-core\2.5.6\spring-core-2.5.6.jar;C:\Documents and Settings\karlp\.m2\repository\org\springframework\spring-context\2.5.6\spring-context-2.5.6.jar;C:\Documents and Settings\karlp\.m2\repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;C:\Documents and Settings\karlp\.m2\repository\org\springframework\spring-beans\2.5.6\spring-beans-2.5.6.jar;C:\Documents and Settings\karlp\.m2\repository\org\springframework\spring-tx\2.5.6\spring-tx-2.5.6.jar;C:\Documents and Settings\karlp\.m2\repository\org\springframework\spring-aop\2.5.6\spring-aop-2.5.6.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\camel\camel-ftp\2.0.0\camel-ftp-2.0.0.jar;C:\Documents and Settings\karlp\.m2\repository\jsch\jsch\0.1.40\jsch-0.1.40.jar;C:\Documents and Settings\karlp\.m2\repository\commons-net\commons-net\2.0\commons-net-2.0.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\camel\camel-jaxb\2.0.0\camel-jaxb-2.0.0.jar;C:\Documents and Settings\karlp\.m2\repository\javax\xml\bind\jaxb-api\2.1\jaxb-api-2.1.jar;C:\Documents and Settings\karlp\.m2\repository\javax\xml\stream\stax-api\1.0-2\stax-api-1.0-2.jar;C:\Documents and Settings\karlp\.m2\repository\javax\activation\activation\1.1\activation-1.1.jar;C:\Documents and Settings\karlp\.m2\repository\com\sun\xml\bind\jaxb-impl\2.1.10\jaxb-impl-2.1.10.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\ftpserver\ftpserver-core\1.0.3\ftpserver-core-1.0.3.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\ftpserver\ftplet-api\1.0.3\ftplet-api-1.0.3.jar;C:\Documents and Settings\karlp\.m2\repository\org\slf4j\slf4j-api\1.5.8\slf4j-api-1.5.8.jar;C:\Documents and Settings\karlp\.m2\repository\org\apache\mina\mina-core\2.0.0-M6\mina-core-2.0.0-M6.jar;C:\Documents and Settings\karlp\.m2\repository\org\slf4j\slf4j-log4j12\1.5.8\slf4j-log4j12-1.5.8.jar;C:\Documents and Settings\karlp\.m2\repository\log4j\log4j\1.2.14\log4j-1.2.14.jar" com.intellij.rt.execution.application.AppMain is.vf.bugs.camel.ftp.FakeFtpMain
SLF4J: This version of SLF4J requires log4j version 1.2.12 or later. See also http://www.slf4j.org/codes.html#log4j_version
2009-11-17 16:11:18,461 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Starting>
2009-11-17 16:11:18,461 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Starting producer: Producer[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]>
2009-11-17 16:11:18,461 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Processing Exchange[Message: File written periodically by conan to keep the ftp endpoint alive...]>
2009-11-17 16:11:18,461 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Not already connected/logged in. Connecting to: Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]>
2009-11-17 16:11:19,024 INFO [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Connected and logged in to: Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]>
2009-11-17 16:11:19,024 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <About to write [autreq/writeAttempt.txt] to [Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]] from exchange [Exchange[Message: File written periodically by conan to keep the ftp endpoint alive...]]>
2009-11-17 16:11:19,102 INFO [org.apache.ftpserver.command.impl.STOR:pool-2-thread-1] - <File uploaded /autreq/writeAttempt.txt>
2009-11-17 16:11:19,102 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Wrote [autreq/writeAttempt.txt] to [Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]]>
##### File written happily.... ^^^^^^^^^^^^^^
2009-11-17 16:11:38,305 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Processing Exchange[Message: File written periodically by conan to keep the ftp endpoint alive...]>
2009-11-17 16:11:38,446 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Exception occured during processing. >
org.apache.camel.component.file.GenericFileOperationFailedException: File operation failed:  Connection closed without indication.. Code: 226
	at org.apache.camel.component.file.remote.FtpOperations.buildDirectory(FtpOperations.java:229)
	at org.apache.camel.component.file.GenericFileProducer.writeFile(GenericFileProducer.java:133)
	at org.apache.camel.component.file.GenericFileProducer.processExchange(GenericFileProducer.java:86)
	at org.apache.camel.component.file.remote.RemoteFileProducer.process(RemoteFileProducer.java:52)
	at org.apache.camel.processor.SendProcessor$1.doInProducer(SendProcessor.java:81)
	at org.apache.camel.processor.SendProcessor$1.doInProducer(SendProcessor.java:79)
	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:141)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:78)
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:61)
	at org.apache.camel.processor.RedeliveryErrorHandler.processExchange(RedeliveryErrorHandler.java:186)
	at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:155)
	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:88)
	at org.apache.camel.processor.DefaultErrorHandler.process(DefaultErrorHandler.java:49)
	at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:148)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:74)
	at org.apache.camel.processor.UnitOfWorkProcessor.processNext(UnitOfWorkProcessor.java:54)
	at org.apache.camel.processor.DelegateProcessor.process(DelegateProcessor.java:48)
	at org.apache.camel.component.seda.SedaConsumer.run(SedaConsumer.java:66)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.commons.net.ftp.FTPConnectionClosedException: Connection closed without indication.
	at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:267)
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:460)
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:520)
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:569)
	at org.apache.commons.net.ftp.FTP.pwd(FTP.java:1248)
	at org.apache.commons.net.ftp.FTPClient.printWorkingDirectory(FTPClient.java:1809)
	at org.apache.camel.component.file.remote.FtpOperations.buildDirectory(FtpOperations.java:204)
	... 20 more
2009-11-17 16:11:38,446 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Disconnecting from: Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]>
#### No file written in this 20second window ^^^^^^^^^^^^^^
2009-11-17 16:11:58,305 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Processing Exchange[Message: File written periodically by conan to keep the ftp endpoint alive...]>
2009-11-17 16:11:58,305 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Not already connected/logged in. Connecting to: Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]>
2009-11-17 16:11:58,321 INFO [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Connected and logged in to: Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]>
2009-11-17 16:11:58,321 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <About to write [autreq/writeAttempt.txt] to [Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]] from exchange [Exchange[Message: File written periodically by conan to keep the ftp endpoint alive...]]>
2009-11-17 16:11:58,384 INFO [org.apache.ftpserver.command.impl.STOR:pool-2-thread-4] - <File uploaded /autreq/writeAttempt.txt>
2009-11-17 16:11:58,384 DEBUG [org.apache.camel.component.file.remote.RemoteFileProducer:Camel thread 0: seda://writeFtp] - <Wrote [autreq/writeAttempt.txt] to [Endpoint[ftp://camelUser@localhost:2121/autreq?passiveMode=true&password=camelUser]]>
#### File written happily again. ^^^^^^^
